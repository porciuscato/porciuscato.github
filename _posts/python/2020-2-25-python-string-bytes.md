---
comments: true
title: python의 strng과 bytes
published: false
updated: 2020-2-26
tags: [python, strings, bytes]
categories: [development]
---

python 의 string과 bytes에 대해 알아보자



# String

#### Unicode

&nbsp;&nbsp;유니코드는 글자를 4바이트로 표현한다. ASCII는 1바이트로서 가용 범위가 256가지 밖에 되지 않아, 전세계 모든 수를 표현할 수 없다. 2 바이트 역시 표현할 수 없다. 유니코드의 4바이트가 모두 사용되는 것은 아니지만 현존하는 모든 언어를 표현하기에는 충분하다. 유니코드의 각각 숫자는 오직 한 문자만을 가리킨다. 

&nbsp;&nbsp;하지만 이는 낭비로 보인다. 영어는 1바이트면 충분하고, 심지어 중국어도 2바이트면 모든 문자를 표현할 수 있기 때문이다. 

&nbsp;&nbsp;4 바이트를  모두 사용하는 인코딩 방식은 UTF-32(Unicode Transformation Format)라 불린다. 이는 모든 문자를 표현할 수 있지만 낭비가 심하다는 단점이 있다.

&nbsp;&nbsp;대부분의 사람들은 65535개 이상의 문자를 쓰지 않는다. 그래서 2 바이트의 유니코드 인코딩 방식도 있는데, 이를 UTF-16이라 한다. 모든 문자는 대부분 65536개를 넘지 않기 때문이다. 간혹 이 수를 넘는 경우 UTF-16은 우회적인 방법을 사용하나, 이는 극히 드문 경우다.

&nbsp;&nbsp;하지만 UTF-16에도 단점이 있다. 시스템마다 바이트를 저장하는 방식이 다르기 때문이다. 가령 U+4E2D가 UTF-16으로 저장이 된다면 빅엔디안 혹은 리틀엔디안에 따라 4E 2D, 2D 4E로 저장될 수 있다. 만약 문서들이 로컬에서만 읽힌다면 아무 문제가 없지만 네트워크로 전송이 된다면 매번 저장 방식을 알려줘야만 할 것이다. 그렇지 않다면 시스템은 두 개의 2바이트 문자를 어떻게 읽어야할 지 알 수가 없다. 이 문제를 해결하기 위해 UTF-16은 "Byte Order Mark"를 보낸다. 첫 문자열을 FFFE 혹은 FEFF로 전달하여 인코딩 방식을 알려준다.

&nbsp;&nbsp;그럼에도 UTF-16은 이상적이지 않다. 많은 문자들은 여전히 ASCII로 쓰여지며 심지어 중국 사이트 조차도 ASCII 문자가 많이 쓰인다. 이들을 모두 2 바이트 형식으로 저장하는 것은 낭비가 아닐 수 없다.

&nbsp;&nbsp;이에 대한 해답이 바로 **UTF-8**이다. UTF-8은 가변길이 인코딩 시스템이다. 즉, 다른 문자는 다른 바이트를 가진다는 뜻이다. ASCII 문자는 오직 1 바이트만 사용된다. 심지어 ASCII 코드와 완전히 같은 코드를 사용한다. 라틴어 같은 경우 2 바이트, 중국어는 3 바이트를 사용한다. 



#### Python 3

&nbsp;&nbsp;파이썬 3에서 모든 문자열은 유니코드 문자 시퀀스다. 파이썬 문자열인데 UTF-8로 인코딩 된 것은 없다. 마찬가지로 파이썬 문자열인데 CP-1252로 인코딩 된 것도 없다. UTF-8은 그저 문자를 바이트로 바꾸는 방식 중 하나일 뿐이다. 만약 문자열을 바이트로 바꾸고 싶거나, 바이트를 문자열로 바꾸고 싶다면 파이썬으로 쉽게 할 수 있다. 바이트는 문자가 아니다. 바이트는 바이트일 뿐이다. 문자는 하나의 추상이다. 문자열은 이러한 추상들의 시퀀스다.

- 문자열을 만들기 위해서는 single quotes, 혹은 double quotes를 사용한다.
- 내장함수 `len()`은 문자열의 길이를 반환한다. 이 함수는 iterable들의 길이를 구할 때도 유용하다.
- 문자열도 인덱싱으로 접근 가능하다. 그러나 리스트처럼 해당 인덱스에 재할당은 불가능하다.
- 문자열은 `+` 로 합칠 수 있다. 
- 여러 줄의 걸친 문자열은 `'''` 따옴표 3개로 여닫는다.

```python
>>> a = '學校'
>>> a_8 = a.encode('utf-8') # 6 바이트로 인코딩 된 것을 확인할 수 있다.
b'\xe5\xad\xb8\xe6\xa0\xa1'
>>> a_sig = a.encode('utf-8-sig') # 두 글자가 9 바이트로 인코딩되었다.
b'\xef\xbb\xbf\xe5\xad\xb8\xe6\xa0\xa1'
>>> type(a_8)
bytes
>>> a_8.decode('utf-8')
'學校'
```

- 값을 문자열에 넣기 위해 formatting 을 사용할 수 있다.

```python
>>> name = 'Charlse'
>>> age = '25'
>>> "{} is {} years old.".foramt(name, age)
"Charlse is 25 years old"
```







#### 참고

- [dive into](https://diveinto.org/python3/strings.html)

