---
comments: true
title: java 공부
published: false
updated: 2020-3-13
tags: [java]
categories: [development]
---

자바를 공부하자.



## 자바 언어와 자바 프로그래밍

자바 언어와 프로그래밍은 다르다.

자바 프로그래밍은 버전과 상관없이 자바를 이용해서 절차를 만드는 방법을 의미한다. 언어는 버전에 따라 달라진다.

JDK 8을 이용해서 프로그램을 만드는 방법을 배우자.

자바 프로그래밍으로 구조적, 객체지향적으로 만들어보자.



## 자바 환경설정

오라클이 유료화됐으니 무료인 OpenJDK에 대해 알아보자.

[jcp.org](https://jcp.org/en/home/index)

그러나 이 사이트에서는 최신 버전 위주로 제공한다. JDK 8 버전을 구해서 사용하자.

[github](https://github.com/ojdkbuild/ojdkbuild)

설치 이후 javac, 즉 java compiler는 도스 창에서 사용해야 한다.

command 창에서 `javac` 명령어를 설정하기 위해 환경변수에 파일이 설치된 위치를 추가한다.



## 자바 코드의 기본 규칙

```java
public class Program{
    public static void main(String[] args){
        int kor1, kor2, total;
        float avg;
        kor1 = 50;
        kor2 = 60;
        total = kor1 + kor2;
        avg = total/2;
        System.out.printf("total is %d\n", total);
        System.out.printf("avg is %f\n", avg);    
    }
}
```

작성한 실행코드는 반드시 함수 블럭 안에 있어야 한다.

또한 자바는 캡슐화 도구가 있는데 코드는 반드시 하나의 캡슐화 도구에 있어야 한다.

=> 실행코드는 반드시 함수 안에 있어야 하고 함수는 클래스 안에 있어야 한다.

##### 컴파일 하기

- 위 코드를 `Program.java` 텍스트 파일로 만든다. 파일의 이름은 반드시 main 함수가 있는 class의 이름과 동일해야 한다.
- 이 파일이 있는 위치로 가서 cmd 창에서 `javac Program.java`를 입력하면 아무 것도 뜨지 않는 것을 확인할 수 있다.
- 이때 `dir`을 치면 `Program.class` 파일이 만들어진 것이 보인다.
- 이를 실행하려면 `java Program` 을 입력한다.

> 그런데 소스 코드를 수정하면 컴파일을 다시 해야 한다.

\+ 이렇게 개발할 수는 없다. IDE를 설치하자.

### Eclipse

[링크](https://www.eclipse.org/downloads/)

#### 유용한 단축키

- `ctrl + shift + f` : 자동 줄 맞춤
- `alt + up down` : 코드 블럭 선택하면 줄간 이동 가능



## 자바 언어의 특징

90년대에 Sun microsystems에서 TV에 케이블이 달려 있으니 양방향으로 정보를 주고 받을 수 있지 않을까 하며 연구 시작. 이후 TV 뿐 아닌 가전으로 확대. 이런 생각으로 팀이 구성됨. C++로 프로젝트를 진행했는데 C++이 가진 문제로 새로운 언어를 만들어야 했음. 그래서 자바가 탄생함

##### C++의 어떤 문제 때문인가?

- 객체 생성과 제거

  - 제거가 안 되면 메모리 누수가 발생. 이런 부분을 프로그래머에게 남기면 안되겠다 -> delete 키워드 제거 -> 자바 실행 환경이 알아서 하도록

  개발자는 생성만 한다.

- 참조 변수와 포인터 변수

  - 포인터 변수를 없애고 참조 변수만 남김

- 이차 이상의 포인터 문제

  - 모든 포인터 제거

- 데이터 구조를 정의하는 두 가지 방법(struct, class)

  - struct 키워드를 제거하고 class만 남김

- 함수 지향, 객체지향(C++은 둘 다 가능)

  - 함수는 메소드로만 사용하도록 제약 -> 완전한 객체 지향

- 컬렉션의 부재

  - 언어에 컬렉션을 포함

- 글로벌한 문자 데이터처리의 복잡성

  - 다양한 인코딩 문자열 기능 개선

기타 등등 제거

=> 대부분 제거되고 컬렉션이 포함되었다. 

##### 자바 언어의 특징

- 간결성
- 언어에 컬렉션 포함
- 완전한 객체지향 언어

=> 그러나 요즘 나오는 언어들의 대부분 특징이기도 하다. 그래서 이는 C++과 비교했을 때의 특징이다.



## 자바 플랫폼의 특징

- 새로운 WORA API의 탄생 - platform independent

=> WORA가 무엇인가? Write once, run anywhere -> 한 번 작성으로 모든 곳에서 작동하도록

자바는 운영체제들이 달라서 각기 다르게 작성되야 하는 점을 피할 수 있도록 단일한 API를 제공.

=> 운영체제에 자바 플랫폼만 설치하면 단일하게 API를 사용할 수 있는 것

\+ 그러나 단점도 있다. 플랫폼을 반드시 설치해야하고, 운영체제 고유의 기능을 단일화시킬 수는 없다는 것



## 자바 번역기의 특징

- WORA를 지원하기 위한 자바 프로그래밍의 방법

  CPU가 여러 종류이기 때문에 CPU에 따라 기계어 번역이 달라지는 것이 문제다. 그래서 번역의 문제가 발생

  그래서 컴파일의 문제 때문에 컴파일의 과정을 살펴봄

  -> 1단계: 형태소 분석 -> 2단계: 구문분석-> 3단계: 의미분석-> 4단계: 중간코드-> 5단계: 최적화-> 6단계: 물리코드

  그런데 4단계까지는 특정 CPU를 거론할 필요가 없음. 기계로 넘길때 번역을 하고 넘길지, 안하고 넘길지 고민을 하다가 중간단계까지 고려하게 됨.

  => 결국 4단계까지는 컴파일러를 사용하고, 남은 단계는 인터프리터를 사용

그래서 자바는 실제로 번역기가 2개가 쓰인다. 개발자가 만든 코드는 컴파일러에 의해 4단계까지 번역되고, 받아서 실행하는 사용자들의 환경에 의해 번역되서 사용

이때 중간 코드가 만들어짐(가상 CPU를 고려하여 만들어진 코드)

```
자바 코드 -> 바이트코드 -> 어셈블 코드 -> 기계(이진) 코드
		컴파일러	인터프리터		
```

바이트 코드는 각각의 코드가 1바이트로 이루어져서 바이트 코드라 부름. 혹은 가상 CPU 코드라고도 부름. 그러나 실제 CPU 코드는 아니므로 유사 코드, 슈도 코드라고도 부름. 또는 중간단계까지 번역되었다고 해서 중간 코드라고도 부름.

```
compiler / debugger  |  JIT Compiler / Garbage Collector / Loader / Security
				JDK  <====>  JRE
(Java Development Kit)				(Java Runtime Environment)
```

> \+ 인터프리터를 짓터라고도 함. Just In Time Compiler

그래서 자바를 컴파일하면 실행코드가 아닌 class 파일이 생성되는 것



